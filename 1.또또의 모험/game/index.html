<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ë˜ë˜ì˜ ëª¨í—˜ (The Adventure of Toto)</title>
    <link rel="icon" type="image/png" href="assets/player/toto_idle.png">
    <link rel="stylesheet" href="style.css">
    <script>
        window.onerror = function (msg, url, lineNo, columnNo, error) {
            const errDiv = document.createElement('div');
            errDiv.style.position = 'fixed';
            errDiv.style.top = '0';
            errDiv.style.left = '0';
            errDiv.style.width = '100%';
            errDiv.style.background = 'red';
            errDiv.style.color = 'white';
            errDiv.style.zIndex = '100000';
            errDiv.style.padding = '10px';
            errDiv.style.fontFamily = 'monospace';
            errDiv.innerText = 'ERROR: ' + msg + ' at ' + url + ':' + lineNo;
            document.body.appendChild(errDiv);
            return false;
        };
    </script>
</head>

<body>
    <!-- [New] Orientation Warning for Mobile -->
    <div id="orientation-warning">
        <div class="rotate-icon">ğŸ”„</div>
        <div class="warning-text">PLEASE ROTATE TO LANDSCAPE</div>
        <div class="sub-text">ê°€ë¡œ ëª¨ë“œë¡œ íšŒì „í•˜ì—¬ ê²Œì„ì„ ì¦ê²¨ì£¼ì„¸ìš”</div>
    </div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="start-screen">
            <h1 class="title">ë˜ë˜ì˜ ëª¨í—˜</h1>
            <div class="start-message">CLICK TO START</div>
            <div class="instruction-message">Space: Shoot | X: Bomb | Arrows: Move</div>
            <div class="company-credit">Provided by Mabu Interactive</div>
        </div>
        <div id="ui-layer" class="hidden">
            <div id="hud" class="hidden">
                <div class="score-container">SCORE: <span id="score">000000</span></div>
                <div class="life-container">LIFE: <span id="lives">â˜…â˜…â˜…</span></div>
                <div class="bomb-container">BOMB: <span id="bombs">ğŸ’£ğŸ’£ğŸ’£</span></div>
            </div>
            <div id="dialogue-box" class="hidden">
                <div class="character-portrait"></div>
                <div class="dialogue-content">
                    <div class="character-name">ë˜ë˜</div>
                    <div class="text">ì˜¤ëŠ˜ë”°ë¼ ìˆ²ì´ ë„ˆë¬´ ì¡°ìš©í•œ ê±¸?</div>
            </div>
            <!-- ì¹˜íŠ¸ ë²„íŠ¼ (í…ŒìŠ¤íŠ¸ìš©) -->
            <button id="btn-cheat-next" style="position:absolute; top:10px; right:10px; z-index:9000; padding:10px; background-color:rgba(255,0,0,0.5); color:white; border:2px solid red; border-radius:5px; font-weight:bold; cursor:pointer;" onclick="if(window.gameCheat) window.gameCheat('nextStage');">Next Stage (Cheat)</button>
            <!-- ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ (í„°ì¹˜ìš©) -->
            <div id="mobile-controls">
                <div id="d-pad" class="control-group">
                    <div id="up" class="d-btn" data-key="ArrowUp"></div>
                    <div id="down" class="d-btn" data-key="ArrowDown"></div>
                    <div id="left" class="d-btn" data-key="ArrowLeft"></div>
                    <div id="right" class="d-btn" data-key="ArrowRight"></div>
                </div>
                <div id="action-group" class="control-group">
                    <div id="btn-bomb" class="act-btn" data-key="KeyX">ğŸ’£</div>
                    <div id="btn-shot" class="act-btn" data-key="Space">ğŸ”¥</div>
                </div>
            </div>
        </div>
    </div>
    <script src="game.js?v=bust2" type="module"></script>
    <!-- Removed duplicate script tag -->
    <!-- <script src="game.js" type="module"></script> This was causing issues -->
</body>

</html>