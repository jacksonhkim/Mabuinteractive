<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë˜ë˜ì˜ ëª¨í—˜ (The Adventure of Toto)</title>
    <link rel="stylesheet" href="style.css">
    <script>
        window.onerror = function (msg, url, lineNo, columnNo, error) {
            const errDiv = document.createElement('div');
            errDiv.style.position = 'fixed';
            errDiv.style.top = '0';
            errDiv.style.left = '0';
            errDiv.style.width = '100%';
            errDiv.style.background = 'red';
            errDiv.style.color = 'white';
            errDiv.style.zIndex = '100000';
            errDiv.style.padding = '10px';
            errDiv.style.fontFamily = 'monospace';
            errDiv.innerText = 'ERROR: ' + msg + ' at ' + url + ':' + lineNo;
            document.body.appendChild(errDiv);
            return false;
        };
    </script>
</head>

<body>
    <!-- [New] Orientation Warning for Mobile -->
    <div id="orientation-warning">
        <div class="rotate-icon">ğŸ”„</div>
        <div class="warning-text">PLEASE ROTATE TO LANDSCAPE</div>
        <div class="sub-text">ê°€ë¡œ ëª¨ë“œë¡œ íšŒì „í•˜ì—¬ ê²Œì„ì„ ì¦ê²¨ì£¼ì„¸ìš”</div>
    </div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="start-screen">
            <h1 class="title">ë˜ë˜ì˜ ëª¨í—˜</h1>
            <div class="start-message">CLICK TO START</div>
            <div class="instruction-message">Space: Shoot | X: Bomb | Arrows: Move</div>
            <div class="company-credit">Provided by Mabu Interactive</div>
        </div>
        <div id="ui-layer" class="hidden">
            <div id="hud" class="hidden">
                <div class="score-container">SCORE: <span id="score">000000</span></div>
                <div class="life-container">LIFE: <span id="lives">â˜…â˜…â˜…</span></div>
                <div class="bomb-container">BOMB: <span id="bombs">ğŸ’£ğŸ’£ğŸ’£</span></div>
            </div>
            <div id="dialogue-box" class="hidden">
                <div class="character-portrait"></div>
                <div class="dialogue-content">
                    <div class="character-name">ë˜ë˜</div>
                    <div class="text">ì˜¤ëŠ˜ë”°ë¼ ìˆ²ì´ ë„ˆë¬´ ì¡°ìš©í•œ ê±¸?</div>
                </div>
            </div>
            <!-- ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ (í„°ì¹˜ìš©) -->
            <div id="mobile-controls">
                <div id="d-pad" class="control-group">
                    <div id="up" class="d-btn" data-key="ArrowUp"></div>
                    <div id="down" class="d-btn" data-key="ArrowDown"></div>
                    <div id="left" class="d-btn" data-key="ArrowLeft"></div>
                    <div id="right" class="d-btn" data-key="ArrowRight"></div>
                </div>
                <div id="action-group" class="control-group">
                    <div id="btn-bomb" class="act-btn" data-key="KeyX">ğŸ’£</div>
                    <div id="btn-shot" class="act-btn" data-key="Space">ğŸ”¥</div>
                </div>
            </div>
        </div>
    </div>
    <script src="game.js" type="module"></script>
    <!-- [Dev Tools] Improved for Mobile: Collapsible & Non-blocking -->
    <div id="dev-tools">
        <button id="dev-toggle" onclick="toggleDevPanel()">ğŸ› ï¸ DEV</button>
        <div id="dev-panel" class="hidden">
            <button onclick="window.gameCheat('killBoss')" style="background: red;">â˜ ï¸ KILL BOSS</button>
            <button onclick="window.gameCheat('maxPower')" style="background: orange;">ğŸ’ª MAX POWER</button>
            <button onclick="window.gameCheat('fullBomb')" style="background: blue;">ğŸ’£ FULL BOMB</button>
            <button onclick="window.gameCheat('invincible')" style="background: green;">ğŸ›¡ï¸ GOD MODE</button>
            <button onclick="window.gameCheat('nextStage')" style="background: purple;">â­ï¸ NEXT STAGE</button>
            <button onclick="window.gameCheat('ending')" style="background: #111; border: 1px solid white;">ğŸ¬ FORCE
                ENDING</button>
        </div>
    </div>

    <script>
        function toggleDevPanel() {
            const panel = document.getElementById('dev-panel');
            panel.classList.toggle('hidden');
        }
    </script>
</body>

</html>