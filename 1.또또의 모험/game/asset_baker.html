<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Toto Asset Baker</title>
    <style>
        body {
            background: #333;
            color: #fff;
            font-family: monospace;
            text-align: center;
        }

        canvas {
            border: 1px solid #555;
            background: transparent;
            margin: 10px;
        }

        .asset-card {
            display: inline-block;
            margin: 20px;
            padding: 10px;
            background: #444;
            border-radius: 8px;
        }

        button {
            padding: 8px 16px;
            background: #4caf50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        button:hover {
            background: #45a049;
        }
    </style>
</head>

<body>
    <h1>ğŸ¨ Toto's Asset Baker</h1>
    <p>ì ˆì°¨ì  ì•„íŠ¸ë¥¼ PNG íŒŒì¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>

    <div id="container"></div>

    <script type="module">
        import { drawPixelTotoV2, drawPixelWaspV2, drawPixelButterflyV2 } from './pixel_art_v2.js';

        const ASSETS = [
            { name: 'ch_toto', func: drawPixelTotoV2, w: 64, h: 64 },
            { name: 'en_wasp', func: drawPixelWaspV2, w: 64, h: 64 },
            { name: 'en_butterfly', func: drawPixelButterflyV2, w: 64, h: 64 }
        ];

        const container = document.getElementById('container');

        ASSETS.forEach(asset => {
            const card = document.createElement('div');
            card.className = 'asset-card';

            const title = document.createElement('h3');
            title.innerText = asset.name + '.png';
            card.appendChild(title);

            const canvas = document.createElement('canvas');
            canvas.width = asset.w;
            canvas.height = asset.h;
            const ctx = canvas.getContext('2d');

            // Draw Asset (Center it)
            // ê°€ìƒì˜ ìƒíƒœê°’(state)ë¥¼ ë„˜ê²¨ì¤˜ì•¼ í•  ìˆ˜ë„ ìˆìŒ
            ctx.clearRect(0, 0, asset.w, asset.h);

            // ìº”ë²„ìŠ¤ ì¤‘ì•™ì— ê·¸ë¦¬ê¸° ìœ„í•´ ì¢Œí‘œ ì¡°ì • (í•¨ìˆ˜ë“¤ì´ ì¤‘ì‹¬ì  ê¸°ì¤€ì´ë¼ ê°€ì •)
            // drawPixelTotoV2(ctx, x, y, w, h) -> x,yëŠ” ì¢Œìƒë‹¨
            // í”½ì…€ ì•„íŠ¸ í•¨ìˆ˜ë“¤ì´ (x, y)ë¥¼ ë°›ì•„ì„œ ì¤‘ì•™(cx, cy)ë¥¼ ê³„ì‚°í•¨.
            // ì—¬ê¸°ì„œëŠ” 0,0ì— w,h í¬ê¸°ë¡œ ê·¸ë¦¼
            asset.func(ctx, 0, 0, asset.w, asset.h, 0);

            card.appendChild(canvas);

            const btn = document.createElement('button');
            btn.innerText = 'ğŸ’¾ Download PNG';
            btn.onclick = () => downloadCanvas(canvas, asset.name);
            card.appendChild(btn);

            container.appendChild(card);
        });

        function downloadCanvas(canvas, name) {
            const link = document.createElement('a');
            link.download = `${name}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
    </script>
</body>

</html>